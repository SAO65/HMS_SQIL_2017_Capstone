{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Raw Data\"\nauthor: \"Olgiati Stefano (1)\"\ndate: \"21 May 2016\"\noutput: html_document\n---\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE)\n```\n\n(1) Author Responsible For Correspondence: University of Bergamo <www.unibg.it>, Department of Quantitative Methods, via dei Caniana 2, Bergamo (ITA) 24129; tel  +39 035 20 52 638; fax +39 035 20 52 549; email <stefano.olgiati@unibg.it>\n\n# Reading raw data in .csv format\n\n```{r echo=FALSE}\nlibrary(data.table)\n\nraw.data.GBD <- read.csv(\"GBD.csv\")\nraw.data.WHO.WF <- read.csv(\"WHO_WF.csv\")\nraw.data.WHO.THE <- read.csv(\"WHO_THE.csv\")\n\nnames(raw.data.GBD)\nnames(raw.data.WHO.WF)\nnames(raw.data.WHO.THE)\n\nhead(raw.data.GBD)\nhead(raw.data.WHO.WF)\nhead(raw.data.WHO.THE)\n\n\ndim(raw.data.GBD)\ndim(raw.data.WHO.WF)\ndim(raw.data.WHO.THE)\n\n\n# Data Tables\nattach(raw.data.GBD)\nattach(raw.data.WHO.WF)\nattach(raw.data.WHO.THE)\n\nDT.GBD <- data.table(raw.data.GBD)\nDT.WHO.WF <- data.table(raw.data.WHO.WF)\nDT.WHO.THE <- data.table(raw.data.WHO.THE)\n\ntables()\n```\n\n\n### Tidy Data Set\n\nManipulating data to generate tidy datasets\n```{r}\n# ISO3 codes of EU-28 Countries\n\n# Austria, Belgium, Bulgaria, Croatia, Republic of Cyprus, Czech Republic, Denmark, Estonia, Finland, France, Germany, Greece, Hungary, Ireland, Italy, Latvia, Lithuania, Luxembourg, Malta, Netherlands, Poland, Portugal, Romania, Slovakia, Slovenia, Spain, Sweden and the UK\n\nISO3 <- c(\"AUT\",\"BEL\",\"BGR\",\"HRV\",\"CYP\",\"CZE\",\"DNK\",\"EST\",\"FIN\",\"FRA\",\"DEU\",\"GRC\",\"HUN\",\"IRL\",\n          \"ITA\",\"LVA\",\"LTU\",\"LUX\",\"MLT\",\"NLD\",\"POL\",\"PRT\",\"ROU\",\"SVK\",\"SVN\",\"ESP\",\"SWE\",\"GBR\")\n\nlength(ISO3) == 28\n\n\ndata.WHO.WF.RN <- DT.WHO.WF[DT.WHO.WF$GHO..CODE. == \"HRH_33\" &\n                                        DT.WHO.WF$COUNTRY..CODE. %in% ISO3, ]\ndata.WHO.WF.RN\ndf.WHO.RN.spool <- data.frame(country=data.WHO.WF.RN$COUNTRY..CODE., rn=data.WHO.WF.RN$Numeric, year=data.WHO.WF.RN$YEAR..CODE.)\ndf.WHO.RN.spool\ndf.WHO.WF.RN <- df.WHO.RN.spool[order(df.WHO.RN.spool$country, abs(df.WHO.RN.spool$year) ), ] \n#sort by country and reverse of abs(year)\ndf.WHO.WF.RN <- df.WHO.WF.RN[ !duplicated(df.WHO.WF.RN$country), ]\ndf.WHO.WF.RN\nlength(df.WHO.WF.RN$country)\nlist(df.WHO.WF.RN$country)\n\n\ndata.WHO.WF.MD <- DT.WHO.WF[DT.WHO.WF$GHO..CODE. == \"HRH_26\" &\n                                        DT.WHO.WF$COUNTRY..CODE. %in% ISO3, ]\ndata.WHO.WF.MD\ndf.WHO.MD.spool <- data.frame(country=data.WHO.WF.MD$COUNTRY..CODE., md=data.WHO.WF.MD$Numeric, year=data.WHO.WF.MD$YEAR..CODE.)\ndf.WHO.MD.spool\ndf.WHO.WF.MD <- df.WHO.MD.spool[order(df.WHO.MD.spool$country, abs(df.WHO.MD.spool$year) ), ] \n#sort by country and reverse of abs(year)\ndf.WHO.WF.MD <- df.WHO.WF.MD[ !duplicated(df.WHO.WF.MD$country), ]\ndf.WHO.WF.MD\nlength(df.WHO.WF.MD$country)\nlist(df.WHO.WF.MD$country)\n\n\ndf.WHO.WF <- merge(df.WHO.WF.RN, df.WHO.WF.MD, all.x=FALSE, all.y=FALSE, by=\"country\")\ndf.WHO.WF\n\n\ndata.GBD <- DT.GBD[DT.GBD$year == \"2010\" & DT.GBD$age_name == \"0-1 years\" &\n                                DT.GBD$sex_name == \"Both\", ]\ndata.GBD.2010.ordered <- data.GBD.2010[order(iso3), ]\ndata.GBD.2010.ordered\ndf.GBD <- data.frame(country=data.GBD.2010.ordered$iso3, le=data.GBD.2010.ordered$le, hale=data.GBD.2010.ordered$hale)\ndf.GBD\n\n\ndata.WHO.THE.2010.ordered <- data.WHO.THE.2010[order(COUNTRY), ]\ndata.WHO.THE.2010.ordered\ndf.WHO.THE <- data.frame(country=data.WHO.THE.2010.ordered$COUNTRY, the=data.WHO.THE.2010.ordered$Numeric)\ndf.WHO.THE\n\n\ndf.merge.1 <- merge(df.GBD, df.WHO.THE, all.x=F, by=\"country\")\ndf.merge.1\n\nintermediate.data <- merge(df.merge.1, df.WHO.WF, all.x=F, all.y=FALSE, by=\"country\")\nintermediate.data\n\n# Years Lived with Disability\nyld <- intermediate.data$le - intermediate.data$hale\nyld\n\n# Tidy Dataset\ntidy.data <- data.frame(intermediate.data, yld)\ntidy.data\n\nattach(tidy.data)\n\n# Saving Tidy Dataset to .csv file\nwrite.csv(tidy.data, \"Workforce_Output_EU.csv\")\n```\n\n```{r}\nx <- rn / md\nplot(le, yld)\nplot(yld, x)\nplot(x, the)\n\n```\n\n",
    "created" : 1464162043208.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "468186060",
    "id" : "18665A6F",
    "lastKnownWriteTime" : 1464164428,
    "last_content_update" : 1464164428050,
    "path" : "~/Desktop/Capstone/HMS_SQIL_2017_Capstone/TidyData_EU.Rmd",
    "project_path" : "TidyData_EU.Rmd",
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}